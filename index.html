<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Arthur & Jojo</title>
<style>
    body {
        margin: 0;
        font-family: 'Arial', sans-serif;
        background: linear-gradient(135deg, #1a1a1a, #111);
        color: #eee;
        transition: background 0.5s;
    }
    header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 2rem;
        background: linear-gradient(90deg, #222, #333);
        box-shadow: 0 3px 10px rgba(0,0,0,0.5);
    }
    header h1 {
        margin: 0;
        font-size: 1.8rem;
        color: #ff6;
        text-shadow: 0 0 5px #ff6;
    }
    .menu-btn {
        background: #444;
        border: none;
        color: #fff;
        padding: 0.6rem 1.2rem;
        cursor: pointer;
        font-size: 1rem;
        border-radius: 8px;
        transition: 0.3s;
    }
    .menu-btn:hover {
        background: #666;
    }
    .container {
        padding: 2rem;
    }
    .hidden { display: none; }
    input, textarea {
        padding: 0.5rem;
        margin: 0.5rem 0;
        border-radius: 5px;
        border: none;
        width: 100%;
        background: #222;
        color: #fff;
    }
    button {
        padding: 0.5rem 1rem;
        border-radius: 5px;
        border: none;
        background: linear-gradient(45deg, #ff6, #f90);
        cursor: pointer;
        transition: 0.3s;
        margin-top: 0.5rem;
    }
    button:hover {
        background: linear-gradient(45deg, #f90, #ff6);
    }
    .panel {
        background: #111;
        padding: 1rem;
        border-radius: 10px;
        margin-top: 2rem;
    }
    .panel h2 { margin-top: 0; color: #ff6; }
    .tickets, .annonces, .videos {
        margin-top: 1rem;
    }
    .ticket, .annonce, .video {
        padding: 0.5rem;
        background: #222;
        margin-bottom: 0.5rem;
        border-radius: 5px;
        position: relative;
    }
    .ticket button, .annonce button, .video button {
        position: absolute;
        top: 5px;
        right: 5px;
        background: #f33;
        color: #fff;
        padding: 0.2rem 0.5rem;
    }
    .emoji {
        display: inline-block;
        animation: bounce 1s infinite alternate;
    }
    @keyframes bounce {
        0% { transform: translateY(0); }
        100% { transform: translateY(-5px); }
    }
    footer {
        text-align: center;
        margin-top: 2rem;
        padding: 1rem;
        border-top: 1px solid #444;
        color: #ff6;
    }
</style>
</head>
<body>
<header>
    <h1>Arthur & Jojo</h1>
    <div>
        <button class="menu-btn" id="loginBtn">Se connecter</button>
        <button class="menu-btn" id="ticketsBtn">Ouvrir un ticket</button>
    </div>
</header>

<div class="container">

    <!-- Connexion -->
    <div id="loginPanel" class="panel hidden">
        <h2>Connexion</h2>
        <input type="text" id="username" placeholder="Nom d'utilisateur">
        <input type="password" id="password" placeholder="Mot de passe ou code admin">
        <button id="loginSubmit">Se connecter</button>
        <p id="loginMsg" style="color:red;"></p>
    </div>

    <!-- Profil -->
    <div id="profilePanel" class="panel hidden">
        <h2>Profil : <span id="profileName"></span></h2>
        <button id="editProfileBtn">Modifier le profil</button>
    </div>

    <!-- Admin Panel -->
    <div id="adminPanel" class="panel hidden">
        <h2>Panel Admin</h2>
        <div class="annonces">
            <h3>Annonces</h3>
            <input type="text" id="newAnnonce" placeholder="Nouvelle annonce">
            <button id="addAnnonceBtn">Ajouter annonce</button>
            <div id="annoncesList"></div>
        </div>
        <div class="videos">
            <h3>Vid√©os</h3>
            <input type="text" id="newVideo" placeholder="Lien vid√©o">
            <button id="addVideoBtn">Ajouter vid√©o</button>
            <div id="videosList"></div>
        </div>
        <div class="tickets">
            <h3>Tickets</h3>
            <div id="ticketsList"></div>
        </div>
    </div>

</div>

<footer>
    Cod√© par Jojo fait avec ‚ù§ <span class="emoji">üíª</span>
</footer>

<script>
// Stockage local
let users = JSON.parse(localStorage.getItem("users") || "[]");
let annonces = JSON.parse(localStorage.getItem("annonces") || "[]");
let videos = JSON.parse(localStorage.getItem("videos") || "[]");
let tickets = JSON.parse(localStorage.getItem("tickets") || "[]");
let currentUser = JSON.parse(localStorage.getItem("currentUser") || "null");

const loginBtn = document.getElementById("loginBtn");
const ticketsBtn = document.getElementById("ticketsBtn");
const loginPanel = document.getElementById("loginPanel");
const loginSubmit = document.getElementById("loginSubmit");
const usernameInput = document.getElementById("username");
const passwordInput = document.getElementById("password");
const loginMsg = document.getElementById("loginMsg");
const profilePanel = document.getElementById("profilePanel");
const profileName = document.getElementById("profileName");
const editProfileBtn = document.getElementById("editProfileBtn");
const adminPanel = document.getElementById("adminPanel");
const newAnnonceInput = document.getElementById("newAnnonce");
const addAnnonceBtn = document.getElementById("addAnnonceBtn");
const annoncesList = document.getElementById("annoncesList");
const newVideoInput = document.getElementById("newVideo");
const addVideoBtn = document.getElementById("addVideoBtn");
const videosList = document.getElementById("videosList");
const ticketsList = document.getElementById("ticketsList");

// Fonction utilitaires
function saveAll() {
    localStorage.setItem("users", JSON.stringify(users));
    localStorage.setItem("annonces", JSON.stringify(annonces));
    localStorage.setItem("videos", JSON.stringify(videos));
    localStorage.setItem("tickets", JSON.stringify(tickets));
    localStorage.setItem("currentUser", JSON.stringify(currentUser));
}

function renderProfile() {
    if(currentUser) {
        profilePanel.classList.remove("hidden");
        profileName.textContent = currentUser.name;
        loginPanel.classList.add("hidden");
        if(currentUser.isAdmin) {
            adminPanel.classList.remove("hidden");
        }
    } else {
        profilePanel.classList.add("hidden");
        adminPanel.classList.add("hidden");
    }
}

function renderAnnonces() {
    annoncesList.innerHTML = "";
    annonces.forEach((a, i)=>{
        const div = document.createElement("div");
        div.className = "annonce";
        div.textContent = a;
        const btn = document.createElement("button");
        btn.textContent = "Supprimer";
        btn.onclick = ()=>{ annonces.splice(i,1); saveAll(); renderAnnonces();}
        div.appendChild(btn);
        annoncesList.appendChild(div);
    });
}

function renderVideos() {
    videosList.innerHTML = "";
    videos.forEach((v, i)=>{
        const div = document.createElement("div");
        div.className = "video";
        div.textContent = v;
        const btn = document.createElement("button");
        btn.textContent = "Supprimer";
        btn.onclick = ()=>{ videos.splice(i,1); saveAll(); renderVideos();}
        div.appendChild(btn);
        videosList.appendChild(div);
    });
}

function renderTickets() {
    ticketsList.innerHTML = "";
    tickets.forEach((t, i)=>{
        const div = document.createElement("div");
        div.className = "ticket";
        div.textContent = t.user + " : " + t.messages.join(" | ");
        const btn = document.createElement("button");
        btn.textContent = "Supprimer";
        btn.onclick = ()=>{ tickets.splice(i,1); saveAll(); renderTickets();}
        div.appendChild(btn);
        ticketsList.appendChild(div);
    });
}

// Connexion
loginBtn.onclick = ()=>{ loginPanel.classList.toggle("hidden"); }
loginSubmit.onclick = ()=>{
    const name = usernameInput.value.trim();
    const pass = passwordInput.value.trim();
    if(pass === "2516") {
        // Admin login
        currentUser = {name:"Admin", isAdmin:true};
    } else if(name && pass) {
        // User login
        let user = users.find(u=>u.name===name);
        if(!user){
            user={name:name,id:Math.random().toString(36).substr(2,9),isAdmin:false,tickets:[]};
            users.push(user);
        }
        currentUser = user;
    } else {
        loginMsg.textContent = "Erreur de connexion";
        return;
    }
    saveAll();
    renderProfile();
    renderAnnonces();
    renderVideos();
    renderTickets();
};

// Tickets
ticketsBtn.onclick = ()=>{
    if(!currentUser) return alert("Connectez-vous !");
    const msg = prompt("√âcrivez votre ticket :");
    if(msg){
        tickets.push({user: currentUser.name, messages:[msg]});
        saveAll();
        renderTickets();
    }
};

// Ajouter annonce
addAnnonceBtn.onclick = ()=>{
    if(!currentUser?.isAdmin) return alert("Acc√®s admin requis !");
    if(newAnnonceInput.value){
        annonces.push(newAnnonceInput.value);
        newAnnonceInput.value="";
        saveAll();
        renderAnnonces();
    }
}

// Ajouter vid√©o
addVideoBtn.onclick = ()=>{
    if(!currentUser?.isAdmin) return alert("Acc√®s admin requis !");
    if(newVideoInput.value){
        videos.push(newVideoInput.value);
        newVideoInput.value="";
        saveAll();
        renderVideos();
    }
}

renderProfile();
renderAnnonces();
renderVideos();
renderTickets();
</script>
</body>
</html>
